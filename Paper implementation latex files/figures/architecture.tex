%%% ============================================================
%%% FIGURE: System Architecture Diagram
%%% ============================================================
%%% Include in main document with: \input{figures/architecture}
%%% or reference as: \ref{fig:architecture}
%%% ============================================================

\begin{figure*}[t]
\centering
\resizebox{\textwidth}{!}{%
\begin{tikzpicture}[
    node distance=0.9cm,
    block/.style={
        rectangle, draw=blue!60!black, fill=blue!8, 
        text width=1.8cm, minimum height=1cm, 
        align=center, rounded corners=3pt,
        font=\footnotesize\sffamily, line width=0.8pt
    },
    qblock/.style={
        rectangle, draw=purple!70!black, fill=purple!8, 
        text width=1.8cm, minimum height=1cm, 
        align=center, rounded corners=3pt,
        font=\footnotesize\sffamily, line width=0.8pt
    },
    arrow/.style={
        -Stealth, line width=0.8pt, color=gray!70!black
    },
    lbl/.style={
        font=\tiny\sffamily, color=gray!60!black, 
        above, midway
    }
]

% Nodes
\node[block] (data) {IBTrACS\\Dataset};
\node[block, right=of data] (preprocess) {Feature\\Extraction\\\& Normalisation};
\node[block, right=of preprocess] (rescale) {Rescaling\\to $[0, \pi]$};
\node[qblock, right=of rescale] (iqp) {IQP Feature\\Map Circuit\\$U_{\text{IQP}}(\mathbf{x})$};
\node[qblock, right=of iqp] (kernel) {Quantum\\Kernel\\Estimation};
\node[block, right=of kernel] (svm) {SVM\\Training \&\\Prediction};
\node[block, right=of svm] (output) {Cyclone\\Intensity\\Class};

% Arrows
\draw[arrow] (data) -- (preprocess);
\draw[arrow] (preprocess) -- (rescale);
\draw[arrow] (rescale) -- (iqp);
\draw[arrow] (iqp) -- (kernel);
\draw[arrow] (kernel) -- (svm);
\draw[arrow] (svm) -- (output);

% Labels

% Bounding boxes
\begin{scope}[on background layer]
    \node[fit=(data)(preprocess)(rescale), 
          draw=blue!30, fill=blue!3, rounded corners=5pt,
          inner sep=6pt, 
          label={[font=\scriptsize\sffamily,color=blue!60]below:Classical Preprocessing}] {};
    \node[fit=(iqp)(kernel), 
          draw=purple!30, fill=purple!3, rounded corners=5pt,
          inner sep=6pt,
          label={[font=\scriptsize\sffamily,color=purple!60]below:Quantum Processing}] {};
    \node[fit=(svm)(output), 
          draw=blue!30, fill=blue!3, rounded corners=5pt,
          inner sep=6pt,
          label={[font=\scriptsize\sffamily,color=blue!60]below:Classical Inference}] {};
\end{scope}

\end{tikzpicture}%
}% end resizebox
\caption{System architecture of the proposed IQP-kernel SVM framework for cyclone intensity classification. The pipeline consists of three stages: classical preprocessing (feature extraction, normalisation, and rescaling), quantum processing (IQP feature map encoding and kernel estimation), and classical inference (SVM training and prediction). Shaded regions indicate the computational domain of each stage.}\label{fig:architecture}
\end{figure*}
